name: Keep Website Alive

on:
  schedule:
    # Ping every 14 minutes (Render spins down after 15 minutes of inactivity)
    - cron: '*/14 * * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  ping:
    runs-on: ubuntu-latest
    
    steps:
    - name: Ping Website
      run: |
        echo "üöÄ Pinging FitClub website to keep it alive..."
        
        # Replace with your actual Render URL
        WEBSITE_URL="https://your-app-name.onrender.com"
        HEALTH_ENDPOINT="/api/classes"
        
        response=$(curl -s -o /dev/null -w "%{http_code}" --max-time 30 "${WEBSITE_URL}${HEALTH_ENDPOINT}")
        timestamp=$(date '+%Y-%m-%d %H:%M:%S UTC')
        
        if [ "$response" -ge 200 ] && [ "$response" -lt 300 ]; then
          echo "‚úÖ $timestamp - Ping successful ($response)"
        else
          echo "‚ö†Ô∏è $timestamp - Ping returned $response"
        fi
        
        echo "Website URL: $WEBSITE_URL"
        echo "Next ping in 14 minutes..."